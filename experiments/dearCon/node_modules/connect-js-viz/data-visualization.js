var ErrorHandling = require('./error-handling');
var DataVisualization = (function () {
    function DataVisualization(query, visualization) {
        this._query = query;
        this._visualization = visualization;
        this._isLoading = false;
        this.refresh();
    }
    DataVisualization.prototype.refresh = function () {
        var _this = this;
        if (this._isLoading)
            return;
        this._isLoading = true;
        var targetElement = this._visualization.targetElement, qryPromise = this._query.execute(), loadingTracker = qryPromise.then(function (data) {
            _this._isLoading = false;
        });
        ErrorHandling.clearError(targetElement);
        this._visualization.displayData(qryPromise, this._query.metadata());
    };
    return DataVisualization;
})();
module.exports = DataVisualization;
